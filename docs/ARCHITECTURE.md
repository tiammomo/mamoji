# 企业级财务记账系统 - 架构设计

## 一、技术架构

### 1.1 技术栈总览

| 层级 | 技术选型 | 版本要求 | 说明 |
|------|----------|----------|------|
| **前端框架** | Next.js | 14+ | App Router 模式 |
| **前端语言** | TypeScript | 5.0+ | 类型安全 |
| **UI组件库** | shadcn/ui | 最新 | 基于Radix UI |
| **状态管理** | Zustand | 4.x | 轻量级状态管理 |
| **图表库** | ECharts / Recharts | 最新 | 数据可视化 |
| **HTTP客户端** | Axios / Fetch | 最新 | 网络请求 |
| **后端框架** | Hertz | 0.8+ | CloudWeGo HTTP框架 |
| **后端语言** | Go | 1.25.5 | 高性能后端 |
| **ORM框架** | GORM | 2.x | 数据库操作 |
| **数据库** | MySQL | 8.0+ | 主关系型数据库 |
| **缓存** | Redis Cluster | 7.0+ | 分布式缓存 |
| **消息队列** | Apache RocketMQ | 5.x | 异步消息、事件驱动 |
| **部署容器** | Docker | 24+ | 容器化 |
| **编排工具** | Docker Compose | 2.x | 本地开发环境编排 |
| **反向代理** | Nginx | 1.24+ | 入口网关、静态资源 |

### 1.2 整体架构图

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                    客户端层                                           │
│  ┌─────────────────────────┐                      ┌─────────────────────────┐       │
│  │      Web 前端           │                      │     移动端 H5           │       │
│  │   (Next.js + React)     │                      │   (Next.js + React)     │       │
│  │  ┌───────────────────┐  │                      │  ┌───────────────────┐  │       │
│  │  │ 状态管理 (Zustand) │  │                      │  │ 状态管理 (Zustand) │  │       │
│  │  │  API 客户端       │  │                      │  │  API 客户端       │  │       │
│  │  │  WebSocket 连接   │  │                      │  │  WebSocket 连接   │  │       │
│  │  └───────────────────┘  │                      │  └───────────────────┘  │       │
│  └─────────────────────────┘                      └─────────────────────────┘       │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                           │
                                           │ HTTPS / WebSocket
                                           ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                 流量入口层                                           │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │                           Nginx 反向代理                                      │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │    │
│  │  │ SSL终结     │  │ 负载均衡    │  │ 静态资源    │  │ 限流防护    │          │    │
│  │  │ HTTPS       │  │ L4/L7       │  │ gzip压缩    │  │ Rate Limit  │          │    │
│  │  │ 证书管理    │  │ 会话保持    │  │ 缓存        │  │ 防刷        │          │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘          │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                           │
                                           ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                   应用服务层                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────┐    │
│  │                        Mamoji 单体应用                                        │    │
│  │                                                                           │    │
│  │  ┌─────────────────────────────────────────────────────────────────────┐   │    │
│  │  │                         Controller 层                                 │   │    │
│  │  │  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐              │   │    │
│  │  │  │  Auth 模块    │ │ Enterprise   │ │  Account      │              │   │    │
│  │  │  │  认证登录     │ │ 模块         │ │ 模块         │              │   │    │
│  │  │  └───────────────┘ └───────────────┘ └───────────────┘              │   │    │
│  │  │                                                                       │   │    │
│  │  │  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐              │   │    │
│  │  │  │ Transaction   │ │  Budget       │ │ Investment    │              │   │    │
│  │  │  │ 模块         │ │ 模块         │ │ 模块         │              │   │    │
│  │  │  └───────────────┘ └───────────────┘ └───────────────┘              │   │    │
│  │  └─────────────────────────────────────────────────────────────────────┘   │    │
│  │                                                                           │    │
│  │  ┌─────────────────────────────────────────────────────────────────────┐   │    │
│  │  │                         Service 层                                    │   │    │
│  │  │  业务逻辑编排、事务管理、事件发布                                     │   │    │
│  │  └─────────────────────────────────────────────────────────────────────┘   │    │
│  │                                                                           │    │
│  │  ┌─────────────────────────────────────────────────────────────────────┐   │    │
│  │  │                         Repository 层                                 │   │    │
│  │  │  数据访问封装、GORM 操作、缓存同步                                    │   │    │
│  │  └─────────────────────────────────────────────────────────────────────┘   │    │
│  │                                                                           │    │
│  └─────────────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                           │
                    ┌──────────────────────┼──────────────────────┐
                    ▼                      ▼                      ▼
┌───────────────────────────┐ ┌───────────────────────────┐ ┌───────────────────────────┐
│        数据层              │ │        缓存层              │ │        消息层              │
│  ┌─────────────────────┐  │ │  ┌─────────────────────┐  │ │  ┌─────────────────────┐  │
│  │    MySQL            │  │ │  │    Redis            │  │ │  │   RocketMQ          │  │
│  │  ┌─────────────────┐│  │ │  │  ┌─────────────────┐│  │ │  │  ┌─────────────────┐│  │
│  │  │  sys 库 (用户)  ││  │ │  │  │  会话缓存       ││  │ │  │  │  NameSrv        ││  │
│  │  │  biz 库 (业务)  ││  │ │  │  │  数据缓存       ││  │ │  │  │  Broker         ││  │
│  │  │  ───────────────││  │ │  │  │  分布式锁       ││  │ │  │  │  Console        ││  │
│  │  │  主从复制       ││  │ │  │  │  限流计数器     ││  │ │  │  └─────────────────┘│  │
│  │  └─────────────────┘│  │ │  │  └─────────────────┘│  │ │  │                     │  │
│  │                     │  │ │  │                     │  │ │  │  ┌─────────────────┐│  │
│  └─────────────────────┘  │ │  └─────────────────────┘  │ │  │  │  Topic 消息主题 ││  │
│                           │ └───────────────────────────┘ │  │  └─────────────────┘│  │
└───────────────────────────┘ └─────────────────────────────┘  └─────────────────────┘  │
                                           │
                                           ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                 基础设施层                                           │
│  ┌───────────────────────────┐ ┌───────────────────────────┐ ┌─────────────────────┐ │
│  │     监控告警中心           │ │    日志系统              │ │   文件存储          │ │
│  │  ┌─────────────────────┐  │ │  ┌─────────────────────┐  │ │  ┌───────────────┐  │ │
│  │  │  Prometheus         │  │ │  │   FileBeat          │  │ │  │   MinIO       │  │ │
│  │  │  Grafana            │  │ │  │   Logstash          │  │ │  │   本地存储     │  │ │
│  │  │  AlertManager       │  │ │  │   Kibana            │  │ │  └───────────────┘  │ │
│  │  │  Jaeger             │  │ │  └─────────────────────┘  │ └─────────────────────┘ │
│  │  └─────────────────────┘  │ │                                                  │
│  └───────────────────────────┘ └────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 二、模块设计

### 2.1 核心模块

| 模块 | 职责 | 主要功能 |
|------|------|----------|
| **Auth** | 认证授权 | 用户注册登录、JWT Token、SSO集成 |
| **Enterprise** | 企业管理 | 企业信息、成员邀请、角色权限 |
| **AccountingUnit** | 记账单元 | 单元创建、层级管理、权限分配 |
| **Account** | 账户管理 | 账户CRUD、余额查询、流水记录 |
| **Transaction** | 账单管理 | 收入/支出记录、分类管理、附件上传 |
| **Budget** | 预算管理 | 预算编制、审批流程、执行追踪 |
| **Investment** | 投资理财 | 投资组合、市值追踪、收益计算 |
| **Asset** | 资产管理 | 资产分类、折旧计算、清理报废 |
| **Report** | 报表统计 | 日报/月报、趋势分析、导出 |
| **Notification** | 消息通知 | 系统通知、站内消息、消息推送 |
| **Push** | 推送服务 | 邮件、短信、微信模板消息 |

### 2.2 模块交互图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         模块交互关系                                      │
│                                                                         │
│                           ┌─────────────┐                               │
│                           │    Auth      │                               │
│                           │   (认证)     │                               │
│                           └──────┬──────┘                               │
│                                  │                                       │
│       ┌──────────────────────────┼──────────────────────────┐           │
│       ▼                          ▼                          ▼           │
│  ┌─────────────┐          ┌─────────────┐          ┌─────────────┐     │
│  │  Enterprise │          │ Accounting  │          │ Notification│     │
│  │   (企业)    │          │   Unit      │          │  (通知)     │     │
│  └──────┬──────┘          │  (单元)     │          └──────┬──────┘     │
│         │                 └──────┬──────┘                 │            │
│         │                        │                        │            │
│         │         ┌──────────────┼──────────────┐         │            │
│         ▼         ▼              ▼              ▼         ▼            │
│    ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐        │
│    │ Account │ │  Trans  │ │ Budget  │ │ Invest  │ │  Asset  │        │
│    │(账户)   │ │(账单)   │ │(预算)   │ │(投资)   │ │(资产)   │        │
│    └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘        │
│         │           │           │           │           │              │
│         └───────────┼───────────┼───────────┼───────────┘              │
│                     │           │           │                          │
│                     ▼           ▼           ▼                          │
│               ┌─────────────────────────────────────────┐              │
│               │              Report (报表)               │              │
│               └─────────────────────────────────────────┘              │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 三、核心模块设计

### 3.1 认证模块

#### 3.1.1 认证流程

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         用户认证流程                                      │
│                                                                         │
│  1. 用户登录                                                             │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  POST /api/v1/auth/login                                        │   │
│  │  {                                                             │   │
│  │    "username": "user@example.com",                             │   │
│  │    "password": "xxx",                                          │   │
│  │    "captcha": "xxx",                                           │   │
│  │    "captchaId": "xxx"                                          │   │
│  │  }                                                             │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                   │                                     │
│                                   ▼                                     │
│  2. 验证用户名密码 + 验证码                                                │
│  3. 生成 JWT Token (RS256)                                               │
│  4. 返回 Token + UserInfo                                                │
│                                                                         │
│  Token 结构:                                                            │
│  - Header: { alg: RS256, typ: JWT }                                     │
│  - Payload: { userId, enterpriseId, role, exp, iat }                    │
│  - Signature: 私钥签名                                                   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

#### 3.1.2 权限控制

| 角色 | 权限描述 |
|------|----------|
| **超级管理员** | 企业全部权限、系统配置、成员管理 |
| **财务管理员** | 全部记账权限、预算管理、报表导出 |
| **普通成员** | 查看/编辑已授权单元、记录账单 |
| **只读成员** | 查看已授权单元数据、无编辑权限 |

### 3.2 缓存设计

#### 3.2.1 多级缓存架构

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           多级缓存设计                                    │
│                                                                         │
│  L1: 本地缓存 (Caffeine)                                                │
│      - 大小: 10000 条                                                   │
│      - TTL: 5分钟                                                       │
│      - 适用: 热点数据、高频访问                                         │
│                                                                         │
│  L2: Redis 分布式缓存                                                   │
│      ┌──────────────────────────────────────────────────────────────┐  │
│      │ 缓存类型              │ Key前缀           │ TTL              │  │
│      ├──────────────────────────────────────────────────────────────┤  │
│      │ 用户信息              │ user:info:       │ 30分钟          │  │
│      │ 企业信息              │ ent:info:        │ 30分钟          │  │
│      │ 记账单元列表          │ unit:list:       │ 10分钟          │  │
│      │ 账户余额              │ acc:balance:     │ 5分钟           │  │
│      │ 账单列表              │ tx:list:         │ 5分钟           │  │
│      │ 统计数据              │ stat:            │ 10分钟          │  │
│      └──────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  L3: 数据库 (兜底)                                                      │
│      - 缓存穿透: 布隆过滤器                                             │
│      - 缓存击穿: 互斥锁                                                │
│      - 缓存雪崩: 随机TTL + 持久化                                       │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 3.3 消息通知

#### 3.3.1 事件驱动架构

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         事件驱动流程                                      │
│                                                                         │
│  业务操作                    RocketMQ                   消费者           │
│     │                          │                          │             │
│     │  ───────────────────────▶│  TX_CREATE              │             │
│     │  账单创建事件             │  账单更新事件             │             │
│     │                          │  BUDGET_ALERT            │             │
│     │                          │  预算预警                 │             │
│     │                          │                          │             │
│     │                          │  ───────────────────────▶│             │
│     │                          │                         通知服务        │
│     │                          │                         推送服务        │
│     │                          │                         报表服务        │
│                                                                         │
│  主要Topic:                                                            │
│  - TX_CREATE: 账单创建事件                                              │
│  - TX_UPDATE: 账单更新事件                                              │
│  - BUDGET_ALERT: 预算预警                                              │
│  - INVEST_REMINDER: 投资提醒                                            │
│  - REPORT_DAILY: 每日报告生成                                           │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

#### 3.3.2 消息格式

```json
{
    "messageId": "msg_xxx_xxx",
    "topic": "TX_CREATE",
    "tags": "transaction_created",
    "timestamp": 1703894400000,
    "body": {
        "transactionId": "tx_123",
        "enterpriseId": "ent_456",
        "unitId": "unit_789",
        "type": "income",
        "amount": 1000.00,
        "accountId": "acc_001",
        "createdBy": "user_001",
        "createdAt": "2024-01-01T00:00:00Z"
    },
    "header": {
        "traceId": "trace_xxx",
        "spanId": "span_xxx",
        "version": "1.0"
    }
}
```

---

## 四、数据库设计

### 4.1 库表规划

| 库名 | 表前缀 | 说明 |
|------|--------|------|
| **sys** | sys_* | 系统模块：用户、角色、权限、企业 |
| **biz_enterprise** | ent_* | 企业模块：企业、成员、邀请 |
| **biz_accounting** | acc_* | 会计模块：单元、账户、流水 |
| **biz_transaction** | tx_* | 交易模块：账单、分类、附件 |
| **biz_budget** | budget_* | 预算模块：预算、审批 |
| **biz_investment** | inv_* | 投资模块：投资、持仓、收益 |
| **biz_asset** | ast_* | 资产模块：资产、折旧 |
| **biz_report** | rpt_* | 报表模块：报表、导出 |
| **biz_notification** | not_* | 通知模块：消息、模板 |

### 4.2 分表策略

| 表类型 | 分片键 | 分片算法 | 分片数 |
|--------|--------|----------|--------|
| 账单表 | enterprise_id | Hash取模 | 16 |
| 流水表 | account_id | Hash取模 | 16 |
| 预算表 | enterprise_id | Hash取模 | 8 |
| 投资表 | enterprise_id | Hash取模 | 8 |
| 资产表 | enterprise_id | Hash取模 | 8 |
| 通知表 | user_id | Hash取模 | 8 |

---

## 五、安全设计

### 5.1 传输安全

| 层级 | 安全措施 | 说明 |
|------|----------|------|
| 传输层 | HTTPS | SSL/TLS 加密传输 |
| 网关层 | Nginx | 限流、防刷、WAF |
| 认证层 | JWT | Token认证，有效期24小时 |
| 服务层 | RBAC | 角色权限控制 |
| 数据层 | 脱敏 | 手机号、身份证脱敏 |
| 审计层 | 日志 | 记录所有敏感操作 |

### 5.2 敏感数据处理

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         敏感数据处理                                      │
│                                                                         │
│  数据脱敏规则:                                                          │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  数据类型          │  处理方式              │  示例             │   │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │  手机号            │  中间4位隐藏           │  138****1234      │   │
│  │  身份证号          │  前3后4位保留          │  110***********1234│  │
│  │  银行卡号          │  前6后4位保留          │  6222********1234 │   │
│  │  密码              │  不可逆加密            │  (存储bcrypt hash) │   │
│  │  详细地址          │  仅显示省市            │  北京市/上海市    │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  操作审计:                                                              │
│  - 记录时间、操作用户、操作类型、IP、变更内容                            │
│  - 敏感操作(删除、清算)需要二次确认                                      │
│  - 审计日志保留期: 1年                                                  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 六、性能优化

### 6.1 优化策略

| 优化项 | 策略 | 预期收益 |
|--------|------|----------|
| **接口响应** | 缓存 + 异步 | P99 < 500ms |
| **数据库查询** | 索引优化 + 只读分离 | 慢查询 < 100ms |
| **文件上传** | 分片上传 + 断点续传 | 支持GB级文件 |
| **报表导出** | 异步任务 + 分页导出 | 支持10万+数据 |
| **列表查询** | 游标分页 + 延迟加载 | 支持百万级数据 |

### 6.2 限流策略

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           接口限流策略                                    │
│                                                                         │
│  限流配置:                                                              │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  接口类型          │  限流阈值          │  熔断策略             │   │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │  登录/注册         │  10次/分钟/IP     │  15分钟封禁           │   │
│  │  普通API           │  100次/秒         │  返回429              │   │
│  │  查询类接口        │  50次/秒          │  延迟响应             │   │
│  │  导出/报表         │  5次/分钟         │  异步队列             │   │
│  │  文件上传          │  20次/分钟        │  大小限制100MB        │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 七、部署架构

### 7.1 Docker Compose 部署

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      Docker Compose 部署架构                             │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                     Docker Network: mamoji                       │   │
│  │                                                                 │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐ │   │
│  │  │   Nginx     │  │   App       │  │   MySQL                 │ │   │
│  │  │   :80/443   │  │   :8080     │  │   :3306                 │ │   │
│  │  └─────────────┘  └─────────────┘  └─────────────────────────┘ │   │
│  │                                                                 │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐ │   │
│  │  │   Redis     │  │ RocketMQ    │  │   MinIO                 │ │   │
│  │  │   :6379     │  │ :9876/10911 │  │   :9000                 │ │   │
│  │  └─────────────┘  └─────────────┘  └─────────────────────────┘ │   │
│  │                                                                 │   │
│  │  ┌─────────────────────────────────────────────────────────┐   │   │
│  │  │  Prometheus / Grafana / Jaeger (可选)                   │   │   │
│  │  └─────────────────────────────────────────────────────────┘   │   │
│  │                                                                 │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 7.2 目录结构

```
mamoji/
├── deploy/
│   ├── docker-compose.yml
│   ├── nginx/
│   │   ├── nginx.conf
│   │   └── conf.d/
│   ├── mysql/
│   │   ├── my.cnf
│   │   └── init/
│   ├── redis/
│   │   └── redis.conf
│   ├── rocketmq/
│   │   ├── broker.conf
│   │   └── namesrv.conf
│   └── minio/
│       └── config.json
│
├── api/                    # 后端API
│   ├── cmd/
│   ├── internal/
│   │   ├── config/
│   │   ├── handler/
│   │   ├── service/
│   │   ├── repository/
│   │   └── model/
│   ├── pkg/
│   │   ├── cache/
│   │   ├── client/
│   │   └── utils/
│   └── middleware/
│
├── web/                    # 前端
│   ├── app/
│   ├── components/
│   ├── hooks/
│   ├── lib/
│   └── stores/
│
└── docs/                   # 文档
```

---

## 八、开发规范

### 8.1 项目结构

```
mamoji/
├── api/                        # 后端服务
│   ├── cmd/                    # 入口文件
│   │   ├── server/            # 服务启动
│   │   └── migrate/           # 数据迁移
│   │
│   ├── internal/              # 内部包
│   │   ├── config/            # 配置加载
│   │   ├── handler/           # HTTP处理器
│   │   │   ├── v1/           # API v1
│   │   │   └── websocket/    # WebSocket
│   │   ├── middleware/        # 中间件
│   │   │   ├── auth.go       # 认证
│   │   │   ├── cors.go       # 跨域
│   │   │   ├── rate.go       # 限流
│   │   │   └── logger.go     # 日志
│   │   ├── service/           # 业务逻辑
│   │   │   ├── auth/
│   │   │   ├── enterprise/
│   │   │   ├── account/
│   │   │   └── ...
│   │   ├── repository/        # 数据访问
│   │   │   ├── mysql/
│   │   │   └── redis/
│   │   └── model/             # 数据模型
│   │       ├── entity/
│   │       ├── dto/
│   │       └── query/
│   │
│   ├── pkg/                   # 公共包
│   │   ├── cache/            # 缓存封装
│   │   ├── client/           # 外部客户端
│   │   │   ├── mysql.go
│   │   │   ├── redis.go
│   │   │   └── rocketmq.go
│   │   ├── logger/           # 日志封装
│   │   └── utils/            # 工具函数
│   │
│   └── go.mod
│
├── web/                       # 前端应用
│   ├── app/                   # Next.js App Router
│   │   ├── (auth)/           # 认证页面
│   │   ├── (dashboard)/      # 仪表盘
│   │   ├── accounts/         # 账户管理
│   │   ├── transactions/     # 账单管理
│   │   ├── budgets/          # 预算管理
│   │   ├── investments/      # 投资管理
│   │   ├── assets/           # 资产管理
│   │   ├── reports/          # 报表统计
│   │   └── settings/         # 系统设置
│   │
│   ├── components/           # 组件
│   │   ├── ui/              # 基础组件
│   │   ├── charts/          # 图表组件
│   │   └── business/        # 业务组件
│   │
│   ├── hooks/                # 自定义Hooks
│   ├── stores/               # Zustand状态
│   ├── lib/                  # 工具库
│   │   ├── api.ts           # API客户端
│   │   ├── utils.ts         # 工具函数
│   │   └── constants.ts     # 常量定义
│   │
│   └── package.json
│
├── deploy/                   # 部署配置
│   ├── docker-compose.yml
│   └── config/
│
└── docs/                     # 文档
```

### 8.2 代码规范

- **命名规范**: 驼峰命名，包名小写
- **错误处理**: 使用 error wrapping，统一错误码
- **日志规范**: 结构化日志，包含 traceId
- **测试要求**: 单元测试覆盖率 > 60%
- **代码评审**: PR 必须经过评审才能合并

### 8.3 Git 规范

```
分支规范:
- main: 主分支，只读
- develop: 开发分支
- feature/*: 功能分支
- hotfix/*: 紧急修复
- release/*: 发布分支

提交规范:
- feat: 新功能
- fix: Bug修复
- docs: 文档更新
- refactor: 重构
- test: 测试
- chore: 构建/工具
```
